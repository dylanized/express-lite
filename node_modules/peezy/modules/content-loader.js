// setup

	var ContentLoader = {};
	
	var fileHelper = require("peezy-file-helper"),
		path = require("path");

// getPages
	
	ContentLoader.getPages = function(folderpath) {
	
		var page_files = fileHelper.getFilesRecursive(folderpath);				
		var pages = [];				
		var this_page;
		
		for (var i = 0; i < page_files.length; i++) {
		
			// if .DS_Store, delete it from array
			if (page_files[i].indexOf(".DS_Store") > -1) page_files.splice(i, 1);
			
			else {
				
				// build page obj and add it to pages
				
				this_page = {};						
				this_page.filepath = page_files[i];
				
				this_page.slug = page_files[i].replace(folderpath, "").replace(".html", "").replace(/^\//, '');
				
				this_page.content = fileHelper.readSync(path.join(folderpath, this_page.slug));
				
				pages[this_page.slug] = (this_page);
			
			}
			
		}
		
		return pages;
	
	}

module.exports = ContentLoader;